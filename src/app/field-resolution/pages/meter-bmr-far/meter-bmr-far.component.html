<div
  class="page__content p-3 p20 shadow dis-fl dis-fl2 position-relative dis-flex-colu"
>
  <h1 class="title-2">
    <a routerLink="/field-resolution" class="box-navigation">
      <img src="assets/left.png" alt="Back" class="icon_configuration" />
      Back </a
    > <strong style="white-space: nowrap;"> (FR-18) </strong>To generate the meter file again for Bulk Meter Replacement.</h1>
  <div
    class="legendary-tag mt-2 p-2"
    style="
      background-color: #eef5ff;
      border-left: 4px solid #4472c4;
      padding-left: 10px;
    "
  >
    <strong>Criteria:</strong>
    <ol style="margin: 0; padding-left: 20px">
      <li>Applications should be the Bulk Meter Replacement.</li>

      <li>Change can be done if the application status is not in the status below:</li>

      <li style="display: flex; align-items: first baseline">
        <button class="btn-minimize" (click)="toggleTableVisibility()">
          <span *ngIf="!isTableVisible">
            <img
              src="assets/plus.png"
              alt="Image for hidden table"
              class="icon-size"
            />
          </span>
          <span *ngIf="isTableVisible">
            <img
              src="assets/minus.png"
              alt="Image for visible table"
              class="icon-size"
            />
          </span>
        </button>

        <table
          *ngIf="isTableVisible"
          class="status-table"
          style="
            width: 50%;
            margin-top: 10px;
            border-collapse: collapse;
            background-color: #fefcfb;
            font-size: 12px;
          "
        >
          <thead>
            <tr>
              <th style="border: 1px solid #4472c4; padding: 5px">
                Application Status
              </th>
              <th style="border: 1px solid #4472c4; padding: 5px">Code</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td style="border: 1px solid #ddd; padding: 5px">
                REJECTED
              </td>
              <td style="border: 1px solid #ddd; padding: 5px">99</td>
            </tr>
          </tbody>
        </table>
      </li>
    </ol>
  </div>
  <div class="form-container">
    <div class="form-group mt-2">
      <label for="execution-type">Discom :</label>
      <mat-form-field appearance="fill" class="full-width">
        <mat-select placeholder="Choose an option" [(value)]="selectedOption">
          <mat-option *ngFor="let option of options" [value]="option">
            {{ option }}
          </mat-option>
        </mat-select>
      </mat-form-field>
    </div>
    <div class="input-group mt-2">
      <mat-label for="account-id">Case ID:</mat-label>
      <mat-form-field appearance="fill" class="full-width">
        <input
          matInput
          id="account-id"
          placeholder="Enter case id"
          [(ngModel)]="accountId"
        />
      </mat-form-field>
      <span>
        <button
          class="btn btn-md radio-button"
          style="background-color: #4472c4; color: white"
          (click)="getDetails()"
        >
          Get Details
        </button>
      </span>
    </div>
  </div>
  <section *ngIf="data">
    <table class="status-table" style="width: 100%; border-collapse: collapse; background-color: #fefcfb; font-size: 12px;">
      <thead>
        <tr>
          <th style="border: 1px solid #4472c4; padding: 5px">Case Id</th>
          <th style="border: 1px solid #4472c4; padding: 5px">SR Job Id</th>
          <th style="border: 1px solid #4472c4; padding: 5px">Application Type Code</th>
          <th style="border: 1px solid #4472c4; padding: 5px">Is BMR File Uploaded</th>
          <th style="border: 1px solid #4472c4; padding: 5px">Download BMR File</th>
          <th style="border: 1px solid #4472c4; padding: 5px">Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let record of data">
          <td style="border: 1px solid #ddd; padding: 5px">{{ record.referenceNumber || '-' }}</td>
          <td style="border: 1px solid #ddd; padding: 5px">{{ record.srJobsId || '-' }}</td>  
          <td style="border: 1px solid #ddd; padding: 5px">{{ record.applicationTypeCode || '-' }}</td>
          <td style="border: 1px solid #ddd; padding: 5px">{{ record.isBmrFileUploadedToCcb == "1" ? 'YES' : 'NO' }}</td>
          <td style="border: 1px solid #ddd; padding: 5px">
            <button 
              class="btn btn-md"
              (click)="downloadBmrFile(record)">
              <div class="download-icon">
                <mat-icon>get_app</mat-icon> 
              </div>
            </button>
          </td>
          <td style="border: 1px solid #ddd; padding: 5px">
            <button 
              *ngIf="record.isBmrFileUploadedToCcb == '1'"
              class="btn btn-md"
              style="background-color: #4472c4; color: white; padding: 5px 10px; border: none; border-radius: 4px;"
              (click)="openSaveDialog(record, 'after-approval')">
              Update
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </section>
  
</div>
